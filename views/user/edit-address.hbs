{{> headr }}

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #fafbfc;
    color: #333;
  }

  a {
    text-decoration: none;
    color: inherit;
  }

  .main-container {
    display: flex;
    max-width: 1200px;
    margin: 30px auto;
    gap: 25px;
  }

  ul {
    list-style: none;
  }

  .left-panel {
    width: 300px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .sidebar-header {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 20px;
    height: 100px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
  }

  .sidebar-header h6 {
    margin-top: 10px;
    font-weight: 600;
    color: #1e918b;
  }

  .sidebar {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
    flex: 1;
  }

  .sidebar-title {
    font-weight: 600;
    font-size: 18px;
    text-transform: uppercase;
    color: #979797;
  }

  .sidebar-item {
    padding: 10px 0;
    font-size: 16px;
    text-transform: capitalize;
  }

  .sidebar hr {
    border: none;
    border-top: 1px solid #ddd;
    width: 100%;
    padding: 0px !important
  }

  .sidebar-item a {
    color: #555;
    transition: 0.3s;
  }

  .sidebar-item a:hover {
    color: #1e918b;
  }

  .sidebar i {
    color: #1e918b
  }

  .product-grid {
    flex: 1;
    padding: 20px;
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
  }

  .error-message {
    color: red;
    font-size: 14px;
    margin-top: 4px;
  }

  .input-error {
    border-color: red !important;
  }
</style>

<div class="main-container">
  <div class="left-panel">
    <div class="sidebar-header">
      Hi,
      <h6>Customer</h6>
    </div>
    <aside class="sidebar">
      <div class="sidebar-title"><i class="fa-solid fa-user me-3"></i>Account Settings</div>
      <ul>
        <li class="sidebar-item"><a href="/user-profile">Personal Info</a></li>
        <li class="sidebar-item"><a href="/manage-address">Manage Addresses</a></li>
      </ul>
      <hr>
      <div class="sidebar-title"><i class="fa-solid fa-wallet me-3"></i>Wallet</div>
      <ul>
        <li class="sidebar-item"><a href="#">My wallet</a></li>
        <li class="sidebar-item"><a href="#">WalletTransaction</a></li>
      </ul>
      <hr>
      <div class="sidebar-title"><i class="fa-solid fa-clipboard-user me-3"></i>My Stuff</div>
      <ul>
        <li class="sidebar-item"><a href="#">My orders</a></li>
        <li class="sidebar-item"><a href="#">my wishlist</a></li>
      </ul>
      <hr>
      <div class="sidebar-title"><i class="fa-solid fa-right-from-bracket me-3"></i>Logout</div>
    </aside>
  </div>

  <main class="product-grid">
    <div class="address-info ms-4">
      <div class="address-title">
        <h4 class="mb-4">Manage Addresses</h4>
      </div>
      <div class="border" style="padding:0px 20px 20px 20px;background:#cef1f3">
        <p style="color:#1962eb; padding-top:20px; text-transform:uppercase; font-size:16px; font-weight:600">
          Edit address</p>

        <form action="/edit-address/{{address._id}}" method="POST" class="row g-3 mt-3" id="editAddressForm">
  <div class="col-md-6">
    <input type="text" class="form-control" name="fullName" value="{{address.fullName}}" placeholder="Full Name">
    <div id="fulname-error" class="error-message"></div>
  </div>
  <div class="col-md-6">
    <input type="text" class="form-control" name="phone" value="{{address.phone}}" placeholder="Phone Number">
    <div id="phone-error" class="error-message"></div>
  </div>
  <div class="col-md-6">
    <input type="text" class="form-control" name="pincode" value="{{address.pincode}}" placeholder="Pincode">
    <div id="pincode-error" class="error-message"></div>
  </div>
  <div class="col-md-6">
    <input type="text" class="form-control" name="city" value="{{address.city}}" placeholder="City">
    <div id="city-error" class="error-message"></div>
  </div>
  <div class="col-12">
    <textarea class="form-control" name="houseDetails" placeholder="Full Address" rows="3">{{address.houseDetails}}</textarea>
    <div id="Fullad-error" class="error-message"></div>
  </div>
  <div class="col-md-6">
            <select class="form-select" name="state">
              <option value="">Select State</option>
              <option value="Andhra Pradesh">Andhra Pradesh</option>
              <option value="Assam">Assam</option>
              <option value="Bihar">Bihar</option>
              <option value="Chhattisgarh">Chhattisgarh</option>
              <option value="Delhi">Delhi</option>
              <option value="Goa">Goa</option>
              <option value="Gujarat">Gujarat</option>
              <option value="Haryana">Haryana</option>
              <option value="Himachal Pradesh">Himachal Pradesh</option>
              <option value="Jharkhand">Jharkhand</option>
              <option value="Karnataka">Karnataka</option>
              <option value="Kerala">Kerala</option>
              <option value="Madhya Pradesh">Madhya Pradesh</option>
              <option value="Maharashtra">Maharashtra</option>
              <option value="Odisha">Odisha</option>
              <option value="Punjab">Punjab</option>
              <option value="Rajasthan">Rajasthan</option>
              <option value="Tamil Nadu">Tamil Nadu</option>
              <option value="Telangana">Telangana</option>
              <option value="Uttar Pradesh">Uttar Pradesh</option>
              <option value="Uttarakhand">Uttarakhand</option>
              <option value="West Bengal">West Bengal</option>
            </select>
            <div id="state-error" class="error-message"></div>
          </div>
  <div class="col-md-6">
    <input type="text" class="form-control" name="landmark" value="{{address.landMark}}" placeholder="Landmark (optional)">
  </div>
  <div class="col-md-6">
    <input type="text" class="form-control" name="altPhone" value="{{address.altPhone}}" placeholder="Alternate Phone (optional)">
    <div id="altphone-error" class="error-message"></div>
  </div>
  <div class="col-12">
    <label class="form-label fw-semibold me-3">Address Type:</label>
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" name="addressType" id="home" value="Home" {{#if (eq address.addressType 'Home')}}checked{{/if}}>
      <label class="form-check-label" for="home">Home</label>
    </div>
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="radio" name="addressType" id="work" value="Work" {{#if (eq address.addressType 'Work')}}checked{{/if}}>
      <label class="form-check-label" for="work">Work</label>
    </div>
    <div id="addtype-error" class="error-message"></div>
  </div>
  <div class="col-12">
    <button type="submit" class="btn btn-primary px-4">UPDATE</button>
    <a href="/manage-address" class="ms-3" style="text-transform:uppercase;font-weight:600;color:#979797">cancel</a>
  </div>
</form>
      </div>
    </div>
  </main>
</div>

<script>
  document.getElementById("editAddressForm").addEventListener("submit", function (e) {
  e.preventDefault();

  let isValid = true;

  const nameInput = document.querySelector('[name="fullName"]');
  const phoneInput = document.querySelector('[name="phone"]');
  const cityInput = document.querySelector('[name="city"]');
  const stateInput = document.querySelector('[name="state"]');
  const pincodeInput = document.querySelector('[name="pincode"]');
  const addressInput = document.querySelector('[name="houseDetails"]');
  const altphoneInput = document.querySelector('[name="altPhone"]');
  const addressType = document.querySelector('input[name="addressType"]:checked');

  // Clear all errors
  document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
  [nameInput, phoneInput, cityInput, stateInput, pincodeInput, addressInput, altphoneInput].forEach(input => {
    input.classList.remove("input-error");
  });

  if (!nameInput.value.trim()) {
    document.getElementById("fulname-error").textContent = "Please enter your full name.";
    nameInput.classList.add("input-error");
    isValid = false;
  }

  if (!/^\d{10}$/.test(phoneInput.value.trim())) {
    document.getElementById("phone-error").textContent = "Please enter a valid 10-digit phone number.";
    phoneInput.classList.add("input-error");
    isValid = false;
  }

  if (!pincodeInput.value.trim()) {
    document.getElementById("pincode-error").textContent = "Please enter your pincode.";
    pincodeInput.classList.add("input-error");
    isValid = false;
  }

  if (!cityInput.value.trim()) {
    document.getElementById("city-error").textContent = "Please enter your city.";
    cityInput.classList.add("input-error");
    isValid = false;
  }

  if (!addressInput.value.trim()) {
    document.getElementById("Fullad-error").textContent = "Please enter your full address.";
    addressInput.classList.add("input-error");
    isValid = false;
  }

  if (!stateInput.value.trim()) {
    document.getElementById("state-error").textContent = "Please select your state.";
    stateInput.classList.add("input-error");
    isValid = false;
  }

  if (altphoneInput.value.trim() && (altphoneInput.value === phoneInput.value)) {
    document.getElementById("altphone-error").textContent = "Enter another phone number.";
    altphoneInput.classList.add("input-error");
    isValid = false;
  }

  if (!addressType) {
    document.getElementById("addtype-error").textContent = "Please select address type.";
    isValid = false;
  }

  if (isValid) {
    e.target.submit();
  }
});

</script>



{{> foote }}
