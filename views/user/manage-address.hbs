{{> headr }}

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #fafbfc;
    color: #333;
  }

  a {
    text-decoration: none;
    color: inherit;
  }

  .main-container {
    display: flex;
    max-width: 1200px;
    margin: 30px auto;
    gap: 25px;
  }

ul{
  list-style: none;
}

.left-panel {
    width: 300px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .sidebar-header {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 20px;
    height: 100px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
  }

  .sidebar-header h6 {
    margin-top: 10px;
    font-weight: 600;
    color: #1e918b;
  }

  .sidebar {
    background-color: #ffffff;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
    flex: 1;
  }

  .sidebar-title {
    font-weight: 600;
    font-size: 18px;
    text-transform: uppercase;
    color: #979797;
  }

  .sidebar-item {
    padding: 10px 0;
    font-size: 16px;
    text-transform: capitalize;
  }

.sidebar hr {
  border: none;
  border-top: 1px solid #ddd;
  width: 100%;
  padding:0px !important
}

.sidebar-item a {
    color: #555;
    transition: 0.3s;
  }

  .sidebar-item a:hover {
    color: #1e918b;
  }

  .sidebar i{
    color:#1e918b
  }

.product-grid {
    flex: 1;
    padding: 20px;
    background-color: #ffffff;
    border-radius: 10px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
  }
</style>



<div class="main-container">
  <!-- Sidebar Group -->
  <div class="left-panel">
    <div class="sidebar-header">
      Hi,
      <h6>Customer</h6>
    </div>
    <aside class="sidebar">
      <div class="sidebar-title"><i class="fa-solid fa-user me-3"></i>Account Settings</div>
      <ul>
        <li class="sidebar-item"><a href="/user-profile">Personal Info</a></li>
        <li class="sidebar-item"><a href="/manage-address">Manage Addresses</a></li>
      </ul>
      <hr>
      <div class="sidebar-title"><i class="fa-solid fa-wallet me-3"></i>Wallet</div>
      <ul>
        <li class="sidebar-item"><a href="#">My wallet</a></li>
        <li class="sidebar-item"><a href="#">WalletTransaction</a></li>
      </ul>
      <hr>
        <div class="sidebar-title"><i class="fa-solid fa-clipboard-user me-3"></i>My Stuff</div>
         <ul>
          
        <li class="sidebar-item"><a href="#">My orders</a></li>
        <li class="sidebar-item"><a href="#">my wishlist</a></li>
      </ul>
      <hr>
      <div class="sidebar-title"><i class="fa-solid fa-right-from-bracket me-3"></i>Logout</div>
    </aside>
  </div>

  <!-- Main Content -->
 <main class="product-grid">
  <div class="address-info ms-4">
    <div class="address-title">
    <h4 class="mb-4">Manage Addresses</h4>
</div>
<div class="border mb-4" style="padding:20px 20px ">
   <a href="/add-address" style="color:#1962eb ;padding-top:20px; text-transform:uppercase;font-size:16px;font-weight:600">
    <i class="fa-regular fa-plus me-3"></i>Add a new address</a> 
</div>
{{#each userAddress.address}}
<div class="border p-4">
    <span class="border pe-1 ps-1" style="background:#ddd">{{this.addressType}}</span>
    <p><strong style="text-transform:uppercase">{{this.fullName}} &nbsp;{{this.phone}}</strong></p>
    <p>{{this.houseDetails}}, {{this.city}}, {{this.state}} - <span style="font-weight: 600;">{{this.pincode}}</span></p>
    {{#if this.altPhone}}<p>Alt Phone: {{this.altPhone}}</p>{{/if}}
    {{#if this.landMark}}<p>Landmark: {{this.landMark}}</p>{{/if}}
   

    <div class="action-buttons text-end">
         <a href="/edit-address/{{this._id}}">
    <button class="btn btn-primary btn-sm me-4">edit</button></a>
    
   
    <button  class="btn btn-danger btn-sm" onclick="deleteAddress('{{{this._id}}}')">delete</button>
    </div>
</div>
{{/each}}
  </div>
</div>

<!-- Edit Modal -->

<script> 
function deleteAddress(id) {
  Swal.fire({
    title: 'Are you sure?',
    icon: 'warning',
    showCancelButton: true,
    confirmButtonText: 'Yes',
    cancelButtonText: 'No'
  }).then((result) => {
    if (result.isConfirmed) {
      $.ajax({
        url: `/delete-address/${id}`, // check route
        method: "DELETE",
        success: function(data) {
          Swal.fire({
            title: 'Deleted!',
            text: data.message,
            icon: 'success',
            confirmButtonText: 'OK'
          }).then(() => {
            location.reload();
          });
        },
        error: function(err) {
  else {
    Swal.fire({
      title: 'Error!',
      text: 'An unexpected error occurred.',
      icon: 'error',
      confirmButtonText: 'OK'
    });
  }
}
      });
    }
  });
}
</script>

{{> foote }}
